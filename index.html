<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Exercise Canvas</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
	<script type="text/javascript">
		var lat = ""
		var lon = ""
		var x = 100;
		var y = 100;
		var width = screen.width - 20;
		var height = screen.height - 150;
		var xvar = 0;
		var yvar = 0;
		var c;
		var ctx;
		var speed = 4;
		$(document).on("ready",start);
        function start(){
        c=document.getElementById("myCanvas");
		ctx=c.getContext("2d");
		var screenX = document.body.offsetWidth;
 		var screenY = document.body.offsetHeight;
 		
 		function showLocation(position) {
		  lat = position.coords.latitude;
		  lon = position.coords.longitude;
		  var text = "Latitude : " + lat + " Longitude :" + lon;
		  ctx.fillText(text, 20, 20 )
		}

		function errorHandler(err) {
		  if(err.code == 1) {
		    alert("Error: Access is denied!");
		  }else if( err.code == 2) {
		    alert("Error: Position is unavailable!");
		  }
		}
		function getLocation(){

		   if(navigator.geolocation){
		      // timeout at 60000 milliseconds (60 seconds)
		      var options = {timeout:60000};
		      navigator.geolocation.getCurrentPosition(showLocation, 
		                                               errorHandler,
		                                               options);
		   }else{
		      alert("Sorry, browser does not support geolocation!");
		   }
		}

		getLocation()

		$("#myCanvas").attr("width",width).attr("height", height);
		window.ondevicemotion = function(event) {
			//xvar = xvar + event.accelerationIncludingGravity.x;
			//yvar= yvar - event.accelerationIncludingGravity.y;
			xvar = event.accelerationIncludingGravity.x * speed;
			yvar = event.accelerationIncludingGravity.y * speed;
		}

		$("#myCanvas").click(function(e){
			e.preventDefault();
			e.stopPropagation();
			$("#snapA").click();
		})



		setInterval(function(){
			ctx.moveTo(x,y);
			x= x + xvar;
			y= y - yvar;
			ctx.lineTo(x,y);
			ctx.stroke();
		},150)
		  
 	}
	</script>

</head>
<body>
<div data-role='page' id='home'>
	<canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;">
	Your browser does not support the HTML5 canvas tag.
	</canvas>
	<a href='#snap' id='snapA' style="">lalalala</a>
</div>
<div data-role='page' id='snap'>
	<p>holo</p>
</div>
</body>
</html>